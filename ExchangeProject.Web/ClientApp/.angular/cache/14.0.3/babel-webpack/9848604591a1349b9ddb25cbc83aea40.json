{"ast":null,"code":"import { FormControl, FormGroup } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../exchange/exchange.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/form-field\";\nimport * as i4 from \"@angular/material/datepicker\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/material/select\";\nimport * as i8 from \"@angular/material/core\";\nimport * as i9 from \"@angular/material/card\";\n\nfunction ExchangeFormComponent_mat_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const option_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r6.code, \" \");\n  }\n}\n\nfunction ExchangeFormComponent_mat_error_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"WRONG!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ExchangeFormComponent_ng_container_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"p\", 12);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 12);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 12);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const rate_r7 = ctx.ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" On \", i0.ɵɵpipeBind1(3, 4, rate_r7.exchangeDate.date), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" CZK exchange rate is \", rate_r7.rate, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" per \", rate_r7.currency.amount, \" \", rate_r7.currency.code, \"\");\n  }\n}\n\nfunction ExchangeFormComponent_ng_template_25_p_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 12);\n    i0.ɵɵtext(1, \" Choose date and currency to see exchange rate \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ExchangeFormComponent_ng_template_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ExchangeFormComponent_ng_template_25_p_0_Template, 2, 0, \"p\", 13);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r5.init);\n  }\n}\n\nexport class ExchangeFormComponent {\n  constructor(exchangeService) {\n    this.exchangeService = exchangeService;\n    this.exchangeForm = new FormGroup({\n      currency: new FormControl(null),\n      date: new FormControl(new Date())\n    });\n    this.init = false;\n  }\n\n  ngOnInit() {\n    this.firstAvailableDate$ = this.exchangeService.getFirstExistingDate();\n    this.lastAvailableDate$ = this.exchangeService.getLastxistingDate();\n    this.options$ = this.exchangeService.getAllCurrencies();\n    this.exchangeForm.valueChanges.subscribe(values => {\n      if (values.currency && values.date) {\n        this.rate$ = this.exchangeService.getSelectedExchangeRate(values.currency.code, values.date);\n        this.init = true;\n      }\n    });\n  }\n\n}\n\nExchangeFormComponent.ɵfac = function ExchangeFormComponent_Factory(t) {\n  return new (t || ExchangeFormComponent)(i0.ɵɵdirectiveInject(i1.ExchangeService));\n};\n\nExchangeFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ExchangeFormComponent,\n  selectors: [[\"app-exchange-form\"]],\n  decls: 27,\n  vars: 20,\n  consts: [[1, \"main\"], [1, \"example-form\", 3, \"formGroup\"], [\"appearance\", \"fill\", 1, \"example-full-width\"], [\"formControlName\", \"currency\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"matInput\", \"\", \"formControlName\", \"date\", 3, \"matDatepicker\", \"min\", \"max\", \"value\"], [4, \"ngIf\"], [\"matSuffix\", \"\", 3, \"for\"], [\"picker\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [\"info_content\", \"\"], [3, \"value\"], [1, \"text\"], [\"class\", \"text\", 4, \"ngIf\"]],\n  template: function ExchangeFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1)(2, \"mat-form-field\", 2)(3, \"mat-label\");\n      i0.ɵɵtext(4, \"Currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"mat-select\", 3);\n      i0.ɵɵtemplate(6, ExchangeFormComponent_mat_option_6_Template, 2, 2, \"mat-option\", 4);\n      i0.ɵɵpipe(7, \"async\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"mat-form-field\", 2)(9, \"mat-label\");\n      i0.ɵɵtext(10, \"Choose a date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(11, \"input\", 5);\n      i0.ɵɵpipe(12, \"async\");\n      i0.ɵɵpipe(13, \"async\");\n      i0.ɵɵpipe(14, \"async\");\n      i0.ɵɵtemplate(15, ExchangeFormComponent_mat_error_15_Template, 2, 0, \"mat-error\", 6);\n      i0.ɵɵelementStart(16, \"mat-hint\");\n      i0.ɵɵtext(17, \"MM/DD/YYYY\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"mat-datepicker-toggle\", 7)(19, \"mat-datepicker\", null, 8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"mat-card\")(22, \"mat-card-content\");\n      i0.ɵɵtemplate(23, ExchangeFormComponent_ng_container_23_Template, 8, 6, \"ng-container\", 9);\n      i0.ɵɵpipe(24, \"async\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(25, ExchangeFormComponent_ng_template_25_Template, 1, 1, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor);\n    }\n\n    if (rf & 2) {\n      const _r2 = i0.ɵɵreference(20);\n\n      const _r4 = i0.ɵɵreference(26);\n\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.exchangeForm);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(7, 10, ctx.options$));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"matDatepicker\", _r2)(\"min\", i0.ɵɵpipeBind1(12, 12, ctx.firstAvailableDate$))(\"max\", i0.ɵɵpipeBind1(13, 14, ctx.lastAvailableDate$))(\"value\", i0.ɵɵpipeBind1(14, 16, ctx.lastAvailableDate$));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.exchangeForm.date.invalid);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"for\", _r2);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(24, 18, ctx.rate$))(\"ngIfElse\", _r4);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.MatError, i3.MatFormField, i3.MatHint, i3.MatLabel, i3.MatSuffix, i4.MatDatepicker, i4.MatDatepickerInput, i4.MatDatepickerToggle, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName, i6.MatInput, i7.MatSelect, i8.MatOption, i9.MatCard, i9.MatCardContent, i2.AsyncPipe, i2.DatePipe],\n  styles: [\".example-form[_ngcontent-%COMP%] {\\r\\n  min-width: 150px;\\r\\n  max-width: 300px;\\r\\n  width: 100%;\\r\\n  margin-right: 16px\\r\\n}\\r\\n  \\r\\n  .example-full-width[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n  }\\r\\n  \\r\\n  .main[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  justify-content:space-between;\\r\\n\\r\\n  .mat-card {\\r\\n    width: 300px;\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n  }\\r\\n}\\r\\n  \\r\\n  .text[_ngcontent-%COMP%] {\\r\\n    font-size: 20px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4Y2hhbmdlLWZvcm0uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsV0FBVztFQUNYO0FBQ0Y7O0VBRUU7SUFDRSxXQUFXO0VBQ2I7O0VBRUY7RUFDRSxhQUFhO0VBQ2IsNkJBQTZCOztFQUU3QjtJQUNFLFlBQVk7SUFDWixhQUFhO0lBQ2Isc0JBQXNCO0VBQ3hCO0FBQ0Y7O0VBR0E7SUFDSSxlQUFlO0FBQ25CIiwiZmlsZSI6ImV4Y2hhbmdlLWZvcm0uY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5leGFtcGxlLWZvcm0ge1xyXG4gIG1pbi13aWR0aDogMTUwcHg7XHJcbiAgbWF4LXdpZHRoOiAzMDBweDtcclxuICB3aWR0aDogMTAwJTtcclxuICBtYXJnaW4tcmlnaHQ6IDE2cHhcclxufVxyXG4gIFxyXG4gIC5leGFtcGxlLWZ1bGwtd2lkdGgge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgfVxyXG5cclxuLm1haW4ge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47XHJcblxyXG4gIC5tYXQtY2FyZCB7XHJcbiAgICB3aWR0aDogMzAwcHg7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICB9XHJcbn1cclxuXHJcblxyXG4udGV4dCB7XHJcbiAgICBmb250LXNpemU6IDIwcHg7XHJcbn1cclxuIl19 */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,WAAT,EAAsBC,SAAtB,QAAuC,gBAAvC;;;;;;;;;;;;;;ICKQC;IACEA;IACFA;;;;;IAFoDA;IAClDA;IAAAA;;;;;;IAYJA;IAA6CA;IAAMA;;;;;;IASnDA;IACEA;IAAiBA;;IAAqCA;IACtDA;IAAiBA;IAAkCA;IACnDA;IAAiBA;IAAmDA;IACtEA;;;;;IAHmBA;IAAAA;IACAA;IAAAA;IACAA;IAAAA;;;;;;IAQvBA;IAA+BA;IAA8CA;;;;;;IAA7EA;;;;;IAAIA;;;;AD7BN,OAAM,MAAOC,qBAAP,CAA4B;EAO9BC,YACYC,eADZ,EAC4C;IAAhC;IANZ,oBAAe,IAAIJ,SAAJ,CAAc;MACzBK,QAAQ,EAAE,IAAIN,WAAJ,CAAkC,IAAlC,CADe;MAEzBO,IAAI,EAAE,IAAIP,WAAJ,CAAsB,IAAIQ,IAAJ,EAAtB;IAFmB,CAAd,CAAf;IAeA,YAAgB,KAAhB;EARK;;EAULC,QAAQ;IAEJ,KAAKC,mBAAL,GAA2B,KAAKL,eAAL,CAAqBM,oBAArB,EAA3B;IACA,KAAKC,kBAAL,GAA0B,KAAKP,eAAL,CAAqBQ,kBAArB,EAA1B;IACA,KAAKC,QAAL,GAAgB,KAAKT,eAAL,CAAqBU,gBAArB,EAAhB;IACA,KAAKC,YAAL,CAAkBC,YAAlB,CAA+BC,SAA/B,CAA0CC,MAAD,IAAW;MAChD,IAAIA,MAAM,CAACb,QAAP,IAAmBa,MAAM,CAACZ,IAA9B,EAAoC;QAClC,KAAKa,KAAL,GAAa,KAAKf,eAAL,CAAqBgB,uBAArB,CAA6CF,MAAM,CAACb,QAAP,CAAgBgB,IAA7D,EAAmEH,MAAM,CAACZ,IAA1E,CAAb;QACA,KAAKgB,IAAL,GAAY,IAAZ;MACD;IACJ,CALD;EAMH;;AA9B6B;;;mBAArBpB,uBAAqBD;AAAA;;;QAArBC;EAAqBqB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCVlC1B,+BAAkB,CAAlB,EAAkB,MAAlB,EAAkB,CAAlB,EAAkB,CAAlB,EAAkB,gBAAlB,EAAkB,CAAlB,EAAkB,CAAlB,EAAkB,WAAlB;MAIiBA;MAAQA;MACnBA;MACEA;;MAGFA;MAEFA,0CAA6D,CAA7D,EAA6D,WAA7D;MACaA;MAAaA;MACxBA;;;;MAMAA;MACAA;MAAUA;MAAUA;MACpBA,6CAAwE,EAAxE,EAAwE,gBAAxE,EAAwE,IAAxE,EAAwE,CAAxE;MAEFA;MAGFA,kCAAU,EAAV,EAAU,kBAAV;MAEIA;;MAKFA;MAKJA;;;;;;;;MApCQA;MAAAA;MAI+BA;MAAAA;MAQ1BA;MAAAA,oCAAwB,KAAxB,EAAwBA,+CAAxB,EAAwB,KAAxB,EAAwBA,8CAAxB,EAAwB,OAAxB,EAAwBA,8CAAxB;MAKKA;MAAAA;MAEqBA;MAAAA;MAOlBA;MAAAA,yDAAoB,UAApB,EAAoB2B,GAApB","names":["FormControl","FormGroup","i0","ExchangeFormComponent","constructor","exchangeService","currency","date","Date","ngOnInit","firstAvailableDate$","getFirstExistingDate","lastAvailableDate$","getLastxistingDate","options$","getAllCurrencies","exchangeForm","valueChanges","subscribe","values","rate$","getSelectedExchangeRate","code","init","selectors","decls","vars","consts","template","_r4"],"sourceRoot":"","sources":["C:\\Users\\Relic\\source\\repos\\ExchangeProject.Web\\ClientApp\\src\\app\\exchange-form\\exchange-form.component.ts","C:\\Users\\Relic\\source\\repos\\ExchangeProject.Web\\ClientApp\\src\\app\\exchange-form\\exchange-form.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { Observable, Subject, map, startWith, switchMap } from 'rxjs';\nimport { ExchangeService, ICurrency, IExchangeRate } from '../exchange/exchange.service';\n\n@Component({\n    selector: 'app-exchange-form',\n    templateUrl: './exchange-form.component.html',\n    styleUrls: ['./exchange-form.component.css']\n})\nexport class ExchangeFormComponent implements OnInit {\n\n    exchangeForm = new FormGroup({\n        currency: new FormControl<ICurrency | null>(null),\n        date: new FormControl<Date>(new Date())\n    });\n\n    constructor(\n        private exchangeService: ExchangeService\n    ) { }\n\n    options$!: Observable<ICurrency[]>;\n    rate$!: Observable<IExchangeRate>;\n\n    firstAvailableDate$!: Observable<Date>;\n    lastAvailableDate$!: Observable<Date>;\n\n    init: boolean = false;\n\n    ngOnInit() {\n\n        this.firstAvailableDate$ = this.exchangeService.getFirstExistingDate();\n        this.lastAvailableDate$ = this.exchangeService.getLastxistingDate();\n        this.options$ = this.exchangeService.getAllCurrencies();\n        this.exchangeForm.valueChanges.subscribe((values) => {\n            if (values.currency && values.date) {\n              this.rate$ = this.exchangeService.getSelectedExchangeRate(values.currency.code, values.date)\n              this.init = true;\n            }\n        });\n    }\n}\n","<div class=\"main\">\n\n  <form [formGroup]=\"exchangeForm\" class=\"example-form\">\n    <mat-form-field class=\"example-full-width\" appearance=\"fill\">\n      <mat-label>Currency</mat-label>\n      <mat-select formControlName=\"currency\">\n        <mat-option *ngFor=\"let option of options$ | async\" [value]=\"option\">\n          {{option.code}}\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n    <mat-form-field appearance=\"fill\" class=\"example-full-width\">\n      <mat-label>Choose a date</mat-label>\n      <input matInput\n             [matDatepicker]=\"picker\"\n             [min]=\"firstAvailableDate$ | async\"\n             [max]=\"lastAvailableDate$ | async\"\n             [value]=\"lastAvailableDate$ | async \"\n             formControlName=\"date\">\n      <mat-error *ngIf=\"exchangeForm.date.invalid\">WRONG!</mat-error>\n      <mat-hint>MM/DD/YYYY</mat-hint>\n      <mat-datepicker-toggle matSuffix [for]=\"picker\"></mat-datepicker-toggle>\n      <mat-datepicker #picker></mat-datepicker>\n    </mat-form-field>\n  </form>\n\n  <mat-card>\n    <mat-card-content>\n      <ng-container *ngIf=\"rate$ | async as rate; else info_content\">\n        <p class=\"text\"> On {{rate.exchangeDate.date| date }} </p>\n        <p class=\"text\"> CZK exchange rate is {{rate.rate}}</p>\n        <p class=\"text\"> per {{rate.currency.amount}} {{rate.currency.code}}</p>\n      </ng-container>\n    </mat-card-content>\n  </mat-card>\n\n</div>\n\n<ng-template #info_content>\n  <p *ngIf=\"!init\" class=\"text\"> Choose date and currency to see exchange rate </p>\n</ng-template>\n"]},"metadata":{},"sourceType":"module"}